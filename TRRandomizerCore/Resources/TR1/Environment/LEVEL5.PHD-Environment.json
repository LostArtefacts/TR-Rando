{
  "All": [],
  "NonPurist": [
    {
      "Comments": "Fix the bat triggers for room 71 - param 74 is duplicated so the third bat doesn't spawn.",
      "EMType": 61,
      "Locations": [
        {
          "X": 55808,
          "Y": -4608,
          "Z": 61952,
          "Room": 70
        },
        {
          "X": 53760,
          "Y": -4608,
          "Z": 64000,
          "Room": 70
        }
      ],
      "Trigger": {
        "Mask": 31,
        "Actions": [
          {
            "Parameter": 73
          },
          {
            "Parameter": 74
          },
          {
            "Parameter": 75
          }
        ]
      },
      "Replace": true
    }
  ],
  "Any": [
    [
      {
        "Comments": "Flood the crocodile pit.",
        "EMType": 2,
        "RoomNumbers": [
          87
        ],
        "WaterTextures": [
          18,
          19,
          20,
          21
        ]
      },
      {
        "Comments": "Move the enemies unless they are water creatures.",
        "EMType": 42,
        "EntityIndex": 82,
        "Location": {
          "X": 67072,
          "Y": -2304,
          "Z": 56832,
          "Room": 2
        },
        "IfLandCreature": true
      },
      {
        "EMType": 42,
        "EntityIndex": 83,
        "Location": {
          "X": 61952,
          "Y": -2304,
          "Z": 56832,
          "Room": 2
        },
        "IfLandCreature": true
      },
      {
        "Comments": "Make a ramp.",
        "EMType": 7,
        "Location": {
          "X": 67072,
          "Y": -2304,
          "Z": 55808,
          "Room": 2
        },
        "FloorClicks": -1,
        "SlantType": 1,
        "XSlant": -1
      },
      {
        "Comments": "Move some faces to fit the ramp.",
        "EMType": 23,
        "Modifications": [
          {
            "RoomNumber": 2,
            "FaceIndex": 81,
            "VertexChanges": {
              "2": {
                "Y": -256
              }
            }
          },
          {
            "RoomNumber": 2,
            "FaceIndex": 79,
            "VertexChanges": {
              "0": {
                "Y": -256
              },
              "3": {
                "Y": -256
              }
            }
          }
        ]
      },
      {
        "Comments": "Patch gaps.",
        "EMType": 26,
        "Quads": {
          "2": [
            {
              "Vertices": [
                177,
                178,
                92,
                93
              ],
              "Texture": 13
            }
          ]
        },
        "Triangles": {
          "2": [
            {
              "Vertices": [
                93,
                107,
                177
              ],
              "Texture": 15
            }
          ]
        }
      }
    ],
    [
      {
        "Comments": "Make a step to reach the final lever room.",
        "EMType": 1,
        "Location": {
          "X": 35328,
          "Y": -256,
          "Z": 64000,
          "Room": 39
        },
        "Clicks": -1,
        "FloorTexture": 65535,
        "SideTexture": 74,
        "Flags": 15
      },
      {
        "Comments": "Make a block to get back out of the final area.",
        "EMType": 1,
        "Location": {
          "X": 35328,
          "Y": -512,
          "Z": 51712,
          "Room": 38
        },
        "Clicks": -7,
        "FloorTexture": 72,
        "SideTexture": 65535,
        "Flags": 15
      },
      {
        "Comments": "Move some faces to fit the block.",
        "EMType": 23,
        "Modifications": [
          {
            "RoomNumber": 38,
            "FaceIndex": 21,
            "VertexChanges": {
              "1": {
                "X": -1024,
                "Z": 1024
              },
              "2": {
                "X": -1024,
                "Z": 1024
              }
            }
          },
          {
            "RoomNumber": 38,
            "FaceIndex": 15,
            "VertexChanges": {
              "0": {
                "X": -1024,
                "Z": 1024
              },
              "3": {
                "X": -1024,
                "Z": 1024
              }
            }
          },
          {
            "RoomNumber": 38,
            "FaceIndices": [
              17,
              23
            ],
            "VertexChanges": {
              "2": {
                "Y": -512
              },
              "3": {
                "Y": -512
              }
            }
          }
        ]
      },
      {
        "Comments": "Retexture squished faces.",
        "EMType": 21,
        "TextureMap": {
          "76": {
            "38": {
              "Rectangles": [
                17,
                23
              ]
            }
          }
        }
      },
      {
        "Comments": "Patch gaps.",
        "EMType": 26,
        "Quads": {
          "38": [
            {
              "Vertices": [
                35,
                34,
                36,
                30
              ],
              "Texture": 76
            },
            {
              "Vertices": [
                34,
                33,
                5,
                38
              ],
              "Texture": 76
            }
          ]
        }
      },
      {
        "Comments": "Finally, drain the final area.",
        "EMType": 3,
        "RoomNumbers": [
          39,
          38,
          31,
          58
        ],
        "WaterTextures": [
          18,
          19,
          20,
          21
        ]
      }
    ]
  ],
  "AllWithin": [
    [
      [
        {
          "Comments": "Leave block 51 where it is.",
          "EMType": 1000
        }
      ],
      [
        {
          "Comments": "Move block 51 forward.",
          "EMType": 44,
          "EntityIndex": 51,
          "TargetLocation": {
            "X": 30208,
            "Y": -6144,
            "Z": 18944,
            "Room": 55
          }
        }
      ],
      [
        {
          "Comments": "Move block 51 back.",
          "EMType": 44,
          "EntityIndex": 51,
          "TargetLocation": {
            "X": 30208,
            "Y": -6144,
            "Z": 20992,
            "Room": 55
          }
        }
      ],
      [
        {
          "Comments": "Move block 51 somewhere obscure.",
          "EMType": 44,
          "EntityIndex": 51,
          "TargetLocation": {
            "X": 60928,
            "Y": -2048,
            "Z": 48640,
            "Room": 32
          }
        }
      ]
    ],
    [
      [
        {
          "Comments": "Potential keyhole relocation.",
          "EMType": 41,
          "EntityIndex": 23,
          "Location": {
            "X": 36352,
            "Y": -4096,
            "Z": 50688,
            "Room": 24,
            "Angle": 16384
          }
        }
      ],
      [
        {
          "Comments": "Potential keyhole relocation.",
          "EMType": 41,
          "EntityIndex": 23,
          "Location": {
            "X": 33280,
            "Y": -4096,
            "Z": 50688,
            "Room": 24
          }
        }
      ],
      [
        {
          "Comments": "Potential keyhole relocation.",
          "EMType": 41,
          "EntityIndex": 23,
          "Location": {
            "X": 33280,
            "Y": -4096,
            "Z": 50688,
            "Room": 24,
            "Angle": -16384
          }
        }
      ],
      [
        {
          "Comments": "Potential keyhole relocation.",
          "EMType": 41,
          "EntityIndex": 23,
          "Location": {
            "X": 33280,
            "Y": -4096,
            "Z": 49664,
            "Room": 24,
            "Angle": -16384
          }
        }
      ],
      [
        {
          "Comments": "Potential keyhole relocation.",
          "EMType": 41,
          "EntityIndex": 23,
          "Location": {
            "X": 33280,
            "Y": -4096,
            "Z": 46592,
            "Room": 24,
            "Angle": -16384
          }
        }
      ],
      [
        {
          "Comments": "Potential keyhole relocation.",
          "EMType": 41,
          "EntityIndex": 23,
          "Location": {
            "X": 33280,
            "Y": -4096,
            "Z": 45568,
            "Room": 24,
            "Angle": -16384
          }
        }
      ],
      [
        {
          "Comments": "Potential keyhole relocation.",
          "EMType": 41,
          "EntityIndex": 23,
          "Location": {
            "X": 33280,
            "Y": -4096,
            "Z": 44544,
            "Room": 24,
            "Angle": -16384
          }
        }
      ],
      [
        {
          "Comments": "Potential keyhole relocation.",
          "EMType": 41,
          "EntityIndex": 23,
          "Location": {
            "X": 33280,
            "Y": -4096,
            "Z": 44544,
            "Room": 24,
            "Angle": -32768
          }
        }
      ],
      [
        {
          "Comments": "Potential keyhole relocation.",
          "EMType": 41,
          "EntityIndex": 23,
          "Location": {
            "X": 34304,
            "Y": -4096,
            "Z": 44544,
            "Room": 24,
            "Angle": -32768
          }
        }
      ],
      [
        {
          "Comments": "Potential keyhole relocation.",
          "EMType": 41,
          "EntityIndex": 23,
          "Location": {
            "X": 35328,
            "Y": -4096,
            "Z": 44544,
            "Room": 24,
            "Angle": -32768
          }
        }
      ],
      [
        {
          "Comments": "Potential keyhole relocation.",
          "EMType": 41,
          "EntityIndex": 23,
          "Location": {
            "X": 36352,
            "Y": -4096,
            "Z": 44544,
            "Room": 24,
            "Angle": -32768
          }
        }
      ],
      [
        {
          "Comments": "Potential keyhole relocation.",
          "EMType": 41,
          "EntityIndex": 23,
          "Location": {
            "X": 36352,
            "Y": -4096,
            "Z": 44544,
            "Room": 24,
            "Angle": 16384
          }
        }
      ],
      [
        {
          "Comments": "Potential keyhole relocation.",
          "EMType": 41,
          "EntityIndex": 23,
          "Location": {
            "X": 36352,
            "Y": -4096,
            "Z": 45568,
            "Room": 24,
            "Angle": 16384
          }
        }
      ],
      [
        {
          "Comments": "Potential keyhole relocation.",
          "EMType": 41,
          "EntityIndex": 23,
          "Location": {
            "X": 35328,
            "Y": -3840,
            "Z": 48640,
            "Room": 24,
            "Angle": -16384
          }
        }
      ],
      [
        {
          "Comments": "Potential keyhole relocation.",
          "EMType": 41,
          "EntityIndex": 23,
          "Location": {
            "X": 34304,
            "Y": -3840,
            "Z": 46592,
            "Room": 24
          }
        }
      ],
      [
        {
          "Comments": "Potential keyhole relocation.",
          "EMType": 41,
          "EntityIndex": 23,
          "Location": {
            "X": 33280,
            "Y": -4096,
            "Z": 47616,
            "Room": 24,
            "Angle": 16384
          }
        }
      ],
      [
        {
          "Comments": "Potential keyhole relocation.",
          "EMType": 41,
          "EntityIndex": 23,
          "Location": {
            "X": 33280,
            "Y": -4096,
            "Z": 48640,
            "Room": 24,
            "Angle": 16384
          }
        }
      ]
    ]
  ],
  "OneOf": [
    {
      "Leader": [
        {
          "Comments": "Remove the default lever texture in room 44.",
          "EMType": 21,
          "TextureMap": {
            "1": {
              "44": {
                "Rectangles": [
                  47
                ]
              }
            }
          }
        },
        {
          "Comments": "Move the face to fit the rest of the room.",
          "EMType": 23,
          "Modifications": [
            {
              "RoomNumber": 44,
              "FaceIndex": 47,
              "VertexChanges": {
                "0": {
                  "Y": -512
                },
                "1": {
                  "Y": -512
                }
              }
            }
          ]
        }
      ],
      "Followers": [
        [
          {
            "Comments": "Potential lever relocation.",
            "EMType": 41,
            "EntityIndex": 41,
            "Location": {
              "X": 57856,
              "Y": -8192,
              "Z": 72192,
              "Room": 44,
              "Angle": -32768
            }
          },
          {
            "Comments": "Refacing for above.",
            "EMType": 21,
            "TextureMap": {
              "49": {
                "44": {
                  "Rectangles": [
                    41
                  ]
                }
              }
            }
          },
          {
            "Comments": "Move faces to fit the original lever layout.",
            "EMType": 23,
            "Modifications": [
              {
                "RoomNumber": 44,
                "FaceIndex": 41,
                "VertexChanges": {
                  "0": {
                    "Y": 512
                  },
                  "1": {
                    "Y": 512
                  }
                }
              },
              {
                "RoomNumber": 44,
                "FaceIndex": 48,
                "VertexChanges": {
                  "0": {
                    "Z": -1024
                  },
                  "1": {
                    "X": -1024
                  },
                  "2": {
                    "X": -1024
                  },
                  "3": {
                    "Z": -1024
                  }
                }
              }
            ]
          }
        ],
        [
          {
            "Comments": "Potential lever relocation.",
            "EMType": 41,
            "EntityIndex": 41,
            "Location": {
              "X": 56832,
              "Y": -8192,
              "Z": 72192,
              "Room": 44,
              "Angle": -32768
            }
          },
          {
            "Comments": "Refacing for above.",
            "EMType": 21,
            "TextureMap": {
              "49": {
                "44": {
                  "Rectangles": [
                    33
                  ]
                }
              }
            }
          },
          {
            "Comments": "Move faces to fit the original lever layout.",
            "EMType": 23,
            "Modifications": [
              {
                "RoomNumber": 44,
                "FaceIndex": 33,
                "VertexChanges": {
                  "0": {
                    "Y": 512
                  },
                  "1": {
                    "Y": 512
                  }
                }
              },
              {
                "RoomNumber": 44,
                "FaceIndex": 48,
                "VertexChanges": {
                  "0": {
                    "X": -1024,
                    "Z": -1024
                  },
                  "1": {
                    "X": -2048
                  },
                  "2": {
                    "X": -2048
                  },
                  "3": {
                    "X": -1024,
                    "Z": -1024
                  }
                }
              }
            ]
          }
        ],
        [
          {
            "Comments": "Potential lever relocation.",
            "EMType": 41,
            "EntityIndex": 41,
            "Location": {
              "X": 55808,
              "Y": -8192,
              "Z": 72192,
              "Room": 44,
              "Angle": -16384
            }
          },
          {
            "Comments": "Refacing for above.",
            "EMType": 21,
            "TextureMap": {
              "49": {
                "44": {
                  "Rectangles": [
                    18
                  ]
                }
              }
            }
          },
          {
            "Comments": "Move faces to fit the original lever layout.",
            "EMType": 23,
            "Modifications": [
              {
                "RoomNumber": 44,
                "FaceIndex": 18,
                "VertexChanges": {
                  "0": {
                    "Y": 512
                  },
                  "1": {
                    "Y": 512
                  }
                }
              },
              {
                "RoomNumber": 44,
                "FaceIndex": 48,
                "VertexChanges": {
                  "0": {
                    "X": -3072,
                    "Z": -1024
                  },
                  "1": {
                    "X": -3072,
                    "Z": 1024
                  },
                  "2": {
                    "X": -3072,
                    "Z": 1024
                  },
                  "3": {
                    "X": -3072,
                    "Z": -1024
                  }
                }
              }
            ]
          }
        ],
        [
          {
            "Comments": "Potential lever relocation.",
            "EMType": 41,
            "EntityIndex": 41,
            "Location": {
              "X": 55808,
              "Y": -8192,
              "Z": 73216,
              "Room": 44,
              "Angle": -16384
            }
          },
          {
            "Comments": "Refacing for above.",
            "EMType": 21,
            "TextureMap": {
              "49": {
                "44": {
                  "Rectangles": [
                    21
                  ]
                }
              }
            }
          },
          {
            "Comments": "Move faces to fit the original lever layout.",
            "EMType": 23,
            "Modifications": [
              {
                "RoomNumber": 44,
                "FaceIndex": 21,
                "VertexChanges": {
                  "0": {
                    "Y": 512
                  },
                  "1": {
                    "Y": 512
                  }
                }
              },
              {
                "RoomNumber": 44,
                "FaceIndex": 48,
                "VertexChanges": {
                  "0": {
                    "X": -3072
                  },
                  "1": {
                    "X": -3072,
                    "Z": 2048
                  },
                  "2": {
                    "X": -3072,
                    "Z": 2048
                  },
                  "3": {
                    "X": -3072
                  }
                }
              }
            ]
          }
        ],
        [
          {
            "Comments": "Potential lever relocation.",
            "EMType": 41,
            "EntityIndex": 41,
            "Location": {
              "X": 55808,
              "Y": -8192,
              "Z": 74240,
              "Room": 44,
              "Angle": -16384
            }
          },
          {
            "Comments": "Refacing for above.",
            "EMType": 21,
            "TextureMap": {
              "49": {
                "44": {
                  "Rectangles": [
                    24
                  ]
                }
              }
            }
          },
          {
            "Comments": "Move faces to fit the original lever layout.",
            "EMType": 23,
            "Modifications": [
              {
                "RoomNumber": 44,
                "FaceIndex": 24,
                "VertexChanges": {
                  "0": {
                    "Y": 512
                  },
                  "1": {
                    "Y": 512
                  }
                }
              },
              {
                "RoomNumber": 44,
                "FaceIndex": 48,
                "VertexChanges": {
                  "0": {
                    "X": -3072,
                    "Z": 1024
                  },
                  "1": {
                    "X": -3072,
                    "Z": 3072
                  },
                  "2": {
                    "X": -3072,
                    "Z": 3072
                  },
                  "3": {
                    "X": -3072,
                    "Z": 1024
                  }
                }
              }
            ]
          }
        ],
        [
          {
            "Comments": "Potential lever relocation.",
            "EMType": 41,
            "EntityIndex": 41,
            "Location": {
              "X": 55808,
              "Y": -8192,
              "Z": 74240,
              "Room": 44
            }
          },
          {
            "Comments": "Refacing for above.",
            "EMType": 21,
            "TextureMap": {
              "49": {
                "44": {
                  "Rectangles": [
                    25
                  ]
                }
              }
            }
          },
          {
            "Comments": "Move faces to fit the original lever layout.",
            "EMType": 23,
            "Modifications": [
              {
                "RoomNumber": 44,
                "FaceIndex": 25,
                "VertexChanges": {
                  "0": {
                    "Y": 512
                  },
                  "1": {
                    "Y": 512
                  }
                }
              },
              {
                "RoomNumber": 44,
                "FaceIndex": 48,
                "VertexChanges": {
                  "0": {
                    "X": -3072,
                    "Z": 2048
                  },
                  "1": {
                    "X": -2048,
                    "Z": 3072
                  },
                  "2": {
                    "X": -2048,
                    "Z": 3072
                  },
                  "3": {
                    "X": -3072,
                    "Z": 2048
                  }
                }
              }
            ]
          }
        ],
        [
          {
            "Comments": "Potential lever relocation.",
            "EMType": 41,
            "EntityIndex": 41,
            "Location": {
              "X": 56832,
              "Y": -8192,
              "Z": 74240,
              "Room": 44
            }
          },
          {
            "Comments": "Refacing for above.",
            "EMType": 21,
            "TextureMap": {
              "49": {
                "44": {
                  "Rectangles": [
                    38
                  ]
                }
              }
            }
          },
          {
            "Comments": "Move faces to fit the original lever layout.",
            "EMType": 23,
            "Modifications": [
              {
                "RoomNumber": 44,
                "FaceIndex": 38,
                "VertexChanges": {
                  "0": {
                    "Y": 512
                  },
                  "1": {
                    "Y": 512
                  }
                }
              },
              {
                "RoomNumber": 44,
                "FaceIndex": 48,
                "VertexChanges": {
                  "0": {
                    "X": -2048,
                    "Z": 2048
                  },
                  "1": {
                    "X": -1024,
                    "Z": 3072
                  },
                  "2": {
                    "X": -1024,
                    "Z": 3072
                  },
                  "3": {
                    "X": -2048,
                    "Z": 2048
                  }
                }
              }
            ]
          }
        ],
        [
          {
            "Comments": "Potential lever relocation.",
            "EMType": 41,
            "EntityIndex": 41,
            "Location": {
              "X": 57856,
              "Y": -8192,
              "Z": 74240,
              "Room": 44
            }
          },
          {
            "Comments": "Refacing for above.",
            "EMType": 21,
            "TextureMap": {
              "49": {
                "44": {
                  "Rectangles": [
                    46
                  ]
                }
              }
            }
          },
          {
            "Comments": "Move faces to fit the original lever layout.",
            "EMType": 23,
            "Modifications": [
              {
                "RoomNumber": 44,
                "FaceIndex": 46,
                "VertexChanges": {
                  "0": {
                    "Y": 512
                  },
                  "1": {
                    "Y": 512
                  }
                }
              },
              {
                "RoomNumber": 44,
                "FaceIndex": 48,
                "VertexChanges": {
                  "0": {
                    "X": -1024,
                    "Z": 2048
                  },
                  "1": {
                    "Z": 3072
                  },
                  "2": {
                    "Z": 3072
                  },
                  "3": {
                    "X": -1024,
                    "Z": 2048
                  }
                }
              }
            ]
          }
        ],
        [
          {
            "Comments": "Potential lever relocation.",
            "EMType": 41,
            "EntityIndex": 41,
            "Location": {
              "X": 58880,
              "Y": -8192,
              "Z": 74240,
              "Room": 44
            }
          },
          {
            "Comments": "Refacing for above.",
            "EMType": 21,
            "TextureMap": {
              "49": {
                "44": {
                  "Rectangles": [
                    53
                  ]
                }
              }
            }
          },
          {
            "Comments": "Move faces to fit the original lever layout.",
            "EMType": 23,
            "Modifications": [
              {
                "RoomNumber": 44,
                "FaceIndex": 53,
                "VertexChanges": {
                  "0": {
                    "Y": 512
                  },
                  "1": {
                    "Y": 512
                  }
                }
              },
              {
                "RoomNumber": 44,
                "FaceIndex": 48,
                "VertexChanges": {
                  "0": {
                    "Z": 2048
                  },
                  "1": {
                    "X": 1024,
                    "Z": 3072
                  },
                  "2": {
                    "X": 1024,
                    "Z": 3072
                  },
                  "3": {
                    "Z": 2048
                  }
                }
              }
            ]
          }
        ],
        [
          {
            "Comments": "Potential lever relocation.",
            "EMType": 41,
            "EntityIndex": 41,
            "Location": {
              "X": 58880,
              "Y": -8192,
              "Z": 74240,
              "Room": 44,
              "Angle": -32768
            }
          },
          {
            "Comments": "Refacing for above.",
            "EMType": 21,
            "TextureMap": {
              "49": {
                "44": {
                  "Rectangles": [
                    52
                  ]
                }
              }
            }
          },
          {
            "Comments": "Move faces to fit the original lever layout.",
            "EMType": 23,
            "Modifications": [
              {
                "RoomNumber": 44,
                "FaceIndex": 52,
                "VertexChanges": {
                  "0": {
                    "Y": 512
                  },
                  "1": {
                    "Y": 512
                  }
                }
              },
              {
                "RoomNumber": 44,
                "FaceIndex": 48,
                "VertexChanges": {
                  "0": {
                    "X": 1024,
                    "Z": 1024
                  },
                  "1": {
                    "Z": 2048
                  },
                  "2": {
                    "Z": 2048
                  },
                  "3": {
                    "X": 1024,
                    "Z": 1024
                  }
                }
              }
            ]
          }
        ],
        [
          {
            "Comments": "Potential lever relocation.",
            "EMType": 41,
            "EntityIndex": 41,
            "Location": {
              "X": 57856,
              "Y": -8192,
              "Z": 73216,
              "Room": 44,
              "Angle": 16384
            }
          },
          {
            "Comments": "Refacing for above.",
            "EMType": 21,
            "TextureMap": {
              "49": {
                "44": {
                  "Rectangles": [
                    49
                  ]
                }
              }
            }
          },
          {
            "Comments": "Move faces to fit the original lever layout.",
            "EMType": 23,
            "Modifications": [
              {
                "RoomNumber": 44,
                "FaceIndex": 49,
                "VertexChanges": {
                  "0": {
                    "Y": 512
                  },
                  "1": {
                    "Y": 512
                  }
                }
              },
              {
                "RoomNumber": 44,
                "FaceIndex": 48,
                "VertexChanges": {
                  "0": {
                    "Z": 1024
                  },
                  "1": {
                    "Z": 1024
                  },
                  "2": {
                    "Z": 1024
                  },
                  "3": {
                    "Z": 1024
                  }
                }
              }
            ]
          }
        ]
      ]
    }
  ],
  "ConditionalAllWithin": [],
  "ConditionalAll": [
    {
      "Condition": {
        "Comments": "If there is a secret in the crocodile pit...",
        "ConditionType": 22,
        "And": [
          {
            "Comments": "and the room has been flooded...",
            "ConditionType": 21,
            "RoomIndex": 87
          }
        ],
        "Location": {
          "X": 67072,
          "Y": -512,
          "Z": 55808,
          "Room": 87
        }
      },
      "OnTrue": [
        {
          "Comments": "move the secret away from the wall.",
          "EMType": 53,
          "SectorLocations": [
            {
              "X": 67072,
              "Y": -512,
              "Z": 55808,
              "Room": 87
            }
          ],
          "TargetLocation": {
            "X": 66690,
            "Y": -512,
            "Z": 55426,
            "Room": 87
          }
        }
      ]
    }
  ],
  "Mirrored": []
}