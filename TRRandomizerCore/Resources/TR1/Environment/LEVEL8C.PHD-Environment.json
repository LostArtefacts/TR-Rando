{
  "All": [
    {
      "Comments": "Convert music triggers to oneshot.",
      "EMType": 69,
      "Tags": [
        10
      ],
      "Locations": [
        {
          "X": 42496,
          "Y": -2048,
          "Z": 40448
        },
        {
          "X": 42496,
          "Y": -768,
          "Z": 41472
        },
        {
          "X": 42496,
          "Y": -768,
          "Z": 42496
        },
        {
          "X": 43520,
          "Y": -1152,
          "Z": 54784
        },
        {
          "X": 44544,
          "Y": -1280,
          "Z": 54784
        },
        {
          "X": 43520,
          "Y": -896,
          "Z": 55808
        },
        {
          "X": 44544,
          "Y": -896,
          "Z": 55808
        },
        {
          "X": 43520,
          "Y": -768,
          "Z": 56832
        },
        {
          "X": 44544,
          "Y": -768,
          "Z": 56832
        }
      ],
      "OneShot": true
    },
    {
      "Comments": "Ensure the enemies in room 15 are always triggered rather than only from the invisible platform.",
      "EMType": 63,
      "Tags": [
        10
      ],
      "Locations": [
        {
          "X": 47616,
          "Y": -5376,
          "Z": 33280,
          "Room": 14
        }
      ],
      "BaseLocation": {
        "X": 45568,
        "Y": -8704,
        "Z": 54784,
        "Room": 3
      }
    },
    {
      "EMType": 69,
      "Tags": [
        10
      ],
      "Location": {
        "X": 47616,
        "Y": -5376,
        "Z": 33280,
        "Room": 14
      },
      "TrigType": 0
    },
    {
      "EMType": 71,
      "Tags": [
        10
      ],
      "Locations": [
        {
          "X": 47616,
          "Y": -5376,
          "Z": 33280,
          "Room": 14
        }
      ],
      "ActionItem": {
        "Parameter": 10
      }
    },
    {
      "EMType": 71,
      "Tags": [
        10
      ],
      "Locations": [
        {
          "X": 47616,
          "Y": -5376,
          "Z": 33280,
          "Room": 14
        }
      ],
      "ActionItem": {
        "Action": 10
      }
    },
    {
      "Comments": "Patch the hole in the sphinx.",
      "EMType": 26,
      "Tags": [
        10
      ],
      "Triangles": {
        "0": [
          {
            "Type": 3,
            "Vertices": [
              145,
              192,
              144
            ],
            "Texture": 14
          }
        ]
      }
    },
    {
      "Comments": "Unstretch a face in the sphinx flipmap area.",
      "EMType": 23,
      "Tags": [
        10
      ],
      "Modifications": [
        {
          "RoomNumber": 54,
          "FaceIndex": 4,
          "VertexChanges": {
            "0": {
              "Y": -256
            },
            "1": {
              "Y": -256
            }
          }
        }
      ]
    },
    {
      "Comments": "Add triangles to patch gaps in the sphinx area.",
      "EMType": 26,
      "Tags": [
        10
      ],
      "Triangles": {
        "53": [
          {
            "Type": 3,
            "Vertices": [
              87,
              89,
              90
            ],
            "Texture": 11
          }
        ],
        "54": [
          {
            "Type": 3,
            "Vertices": [
              305,
              304,
              30
            ],
            "Texture": 11
          }
        ]
      }
    }
  ],
  "Any": [
    [
      {
        "Comments": "Raise a slant slightly to allow exiting.",
        "EMType": 7,
        "Location": {
          "X": 39424,
          "Y": 4096,
          "Z": 33280,
          "Room": 36
        },
        "FloorClicks": -2,
        "SlantType": 2,
        "XSlant": 1,
        "ZSlant": 2
      },
      {
        "Comments": "Face modifications for above.",
        "EMType": 23,
        "Modifications": [
          {
            "RoomNumber": 36,
            "FaceIndex": 65,
            "VertexChanges": {
              "0": {
                "Y": -256
              },
              "1": {
                "Y": -256
              },
              "2": {
                "Y": -512
              },
              "3": {
                "Y": -512
              }
            }
          },
          {
            "RoomNumber": 36,
            "FaceIndex": 67,
            "VertexChanges": {
              "0": {
                "Y": -512
              },
              "3": {
                "Y": -512
              }
            }
          },
          {
            "RoomNumber": 36,
            "FaceIndex": 71,
            "VertexChanges": {
              "2": {
                "Y": -256
              },
              "3": {
                "Y": -512
              }
            }
          },
          {
            "RoomNumber": 36,
            "FaceIndex": 66,
            "VertexChanges": {
              "0": {
                "X": -1024,
                "Y": 1536
              },
              "1": {
                "Y": 2048,
                "Z": -1024
              },
              "2": {
                "Y": 2304
              },
              "3": {
                "X": -1024,
                "Y": 2048,
                "Z": 1024
              }
            }
          },
          {
            "RoomNumber": 36,
            "FaceIndex": 64,
            "VertexChanges": {
              "0": {
                "X": -1024,
                "Y": 2048
              },
              "1": {
                "X": 1024,
                "Y": 1792
              },
              "2": {
                "X": 1024,
                "Y": 2048,
                "Z": 1024
              },
              "3": {
                "X": -1024,
                "Y": 2304,
                "Z": 1024
              }
            }
          }
        ]
      },
      {
        "Comments": "Refacing for above.",
        "EMType": 21,
        "TextureMap": {
          "51": {
            "36": {
              "Rectangles": [
                64,
                66
              ]
            }
          }
        }
      },
      {
        "Comments": "Amend lighting.",
        "EMType": 124,
        "FaceMap": {
          "36": {
            "Rectangles": {
              "65": 64,
              "54": 66
            }
          }
        }
      },
      {
        "Comments": "Drain room 36.",
        "EMType": 3,
        "Tags": [
          2
        ],
        "RoomNumbers": [
          36
        ],
        "WaterTextures": [
          107,
          108,
          110,
          156
        ]
      }
    ],
    [
      {
        "Comments": "Raise a slant slightly to allow exiting.",
        "EMType": 7,
        "Location": {
          "X": 30208,
          "Y": 2816,
          "Z": 36352,
          "Room": 19
        },
        "FloorClicks": -3,
        "SlantType": 2,
        "XSlant": -1,
        "ZSlant": -2
      },
      {
        "Comments": "Face modifications for above.",
        "EMType": 23,
        "Modifications": [
          {
            "RoomNumber": 19,
            "FaceIndex": 76,
            "VertexChanges": {
              "0": {
                "Y": -512
              },
              "1": {
                "Y": -1280
              },
              "2": {
                "Y": -1280
              },
              "3": {
                "Y": -512
              }
            }
          },
          {
            "RoomNumber": 19,
            "FaceIndex": 90,
            "VertexChanges": {
              "1": {
                "Y": -512
              },
              "2": {
                "Y": -512
              }
            }
          },
          {
            "RoomNumber": 19,
            "FaceIndex": 78,
            "VertexChanges": {
              "2": {
                "Y": -1280
              },
              "3": {
                "Y": -512
              }
            }
          },
          {
            "RoomNumber": 19,
            "FaceIndex": 77,
            "VertexChanges": {
              "0": {
                "Y": 1536
              },
              "1": {
                "Y": 1280
              },
              "2": {
                "Y": 2560,
                "Z": 1024
              },
              "3": {
                "Y": 2048,
                "Z": 1024
              }
            }
          },
          {
            "RoomNumber": 19,
            "FaceIndex": 63,
            "VertexChanges": {
              "0": {
                "Y": 1280
              },
              "1": {
                "X": 1024,
                "Y": 768,
                "Z": -1024
              },
              "2": {
                "X": 1024,
                "Y": 2048
              },
              "3": {
                "Y": 2560,
                "Z": 1024
              }
            }
          }
        ]
      },
      {
        "Comments": "Refacing for above.",
        "EMType": 21,
        "TextureMap": {
          "51": {
            "19": {
              "Rectangles": [
                77,
                63
              ]
            }
          }
        }
      },
      {
        "Comments": "Drain room 19.",
        "EMType": 3,
        "Tags": [
          2
        ],
        "RoomNumbers": [
          19
        ],
        "WaterTextures": [
          107,
          108,
          110,
          156
        ]
      }
    ],
    [
      {
        "Comments": "Random step in the corridor of doom.",
        "EMType": 7,
        "Location": {
          "X": 26112,
          "Y": 17152,
          "Z": 49664,
          "Room": 27
        },
        "FloorClicks": -1,
        "SlantType": 2,
        "XSlant": 1
      },
      {
        "EMType": 7,
        "Location": {
          "X": 27136,
          "Y": 17152,
          "Z": 49664,
          "Room": 27
        },
        "SlantType": 2,
        "XSlant": 1
      },
      {
        "Comments": "Face modifications for above.",
        "EMType": 23,
        "Modifications": [
          {
            "RoomNumber": 27,
            "FaceIndex": 8,
            "VertexChanges": {
              "0": {
                "Y": -256
              },
              "1": {
                "Y": -512
              },
              "2": {
                "Y": -512
              },
              "3": {
                "Y": -256
              }
            }
          },
          {
            "RoomNumber": 27,
            "FaceIndex": 12,
            "VertexChanges": {
              "1": {
                "Y": -256
              },
              "2": {
                "Y": -256
              }
            }
          },
          {
            "RoomNumber": 27,
            "FaceIndex": 15,
            "VertexChanges": {
              "3": {
                "Y": -256
              }
            }
          },
          {
            "RoomNumber": 27,
            "FaceIndex": 11,
            "VertexChanges": {
              "2": {
                "Y": -256
              },
              "3": {
                "Y": -512
              }
            }
          },
          {
            "RoomNumber": 27,
            "FaceIndex": 14,
            "VertexChanges": {
              "2": {
                "Y": -256
              }
            }
          },
          {
            "RoomNumber": 27,
            "FaceIndex": 10,
            "VertexChanges": {
              "2": {
                "Y": -512
              },
              "3": {
                "Y": -256
              }
            }
          }
        ]
      },
      {
        "Comments": "Plug a gap.",
        "EMType": 26,
        "Quads": {
          "27": [
            {
              "Type": 4,
              "Vertices": [
                26,
                25,
                8,
                9
              ],
              "Texture": 96
            }
          ]
        }
      }
    ],
    [
      {
        "Comments": "Another random step in the corridor of doom.",
        "EMType": 7,
        "Location": {
          "X": 26112,
          "Y": 6656,
          "Z": 44544,
          "Room": 25
        },
        "FloorClicks": -1,
        "SlantType": 2,
        "XSlant": -1
      },
      {
        "EMType": 7,
        "Location": {
          "X": 25088,
          "Y": 6656,
          "Z": 44544,
          "Room": 25
        },
        "SlantType": 2,
        "XSlant": -1
      },
      {
        "Comments": "Face modifications for above.",
        "EMType": 23,
        "Modifications": [
          {
            "RoomNumber": 25,
            "FaceIndex": 8,
            "VertexChanges": {
              "0": {
                "Y": -256
              },
              "1": {
                "Y": -512
              },
              "2": {
                "Y": -512
              },
              "3": {
                "Y": -256
              }
            }
          },
          {
            "RoomNumber": 25,
            "FaceIndex": 4,
            "VertexChanges": {
              "1": {
                "Y": -256
              },
              "2": {
                "Y": -256
              }
            }
          },
          {
            "RoomNumber": 25,
            "FaceIndex": 6,
            "VertexChanges": {
              "3": {
                "Y": -256
              }
            }
          },
          {
            "RoomNumber": 25,
            "FaceIndex": 10,
            "VertexChanges": {
              "2": {
                "Y": -256
              },
              "3": {
                "Y": -512
              }
            }
          },
          {
            "RoomNumber": 25,
            "FaceIndex": 7,
            "VertexChanges": {
              "2": {
                "Y": -256
              }
            }
          },
          {
            "RoomNumber": 25,
            "FaceIndex": 11,
            "VertexChanges": {
              "2": {
                "Y": -512
              },
              "3": {
                "Y": -256
              }
            }
          }
        ]
      },
      {
        "Comments": "Plug a gap.",
        "EMType": 26,
        "Quads": {
          "25": [
            {
              "Type": 4,
              "Vertices": [
                22,
                21,
                13,
                12
              ],
              "Texture": 96
            }
          ]
        }
      }
    ],
    [
      {
        "Comments": "Another random step in the corridor of doom.",
        "EMType": 7,
        "Location": {
          "X": 28160,
          "Y": 1792,
          "Z": 47616,
          "Room": 43
        },
        "FloorClicks": -1,
        "SlantType": 2,
        "ZSlant": -1
      },
      {
        "EMType": 7,
        "Location": {
          "X": 28160,
          "Y": 1792,
          "Z": 46592,
          "Room": 43
        },
        "SlantType": 2,
        "ZSlant": -1
      },
      {
        "Comments": "Face modifications for above.",
        "EMType": 23,
        "Modifications": [
          {
            "RoomNumber": 43,
            "FaceIndex": 9,
            "VertexChanges": {
              "0": {
                "Y": -256
              },
              "1": {
                "Y": -256
              },
              "2": {
                "Y": -512
              },
              "3": {
                "Y": -512
              }
            }
          },
          {
            "RoomNumber": 43,
            "FaceIndex": 6,
            "VertexChanges": {
              "2": {
                "Y": -256
              },
              "3": {
                "Y": -256
              }
            }
          },
          {
            "RoomNumber": 43,
            "FaceIndex": 17,
            "VertexChanges": {
              "3": {
                "Y": -256
              }
            }
          },
          {
            "RoomNumber": 43,
            "FaceIndex": 18,
            "VertexChanges": {
              "2": {
                "Y": -256
              },
              "3": {
                "Y": -512
              }
            }
          },
          {
            "RoomNumber": 43,
            "FaceIndex": 8,
            "VertexChanges": {
              "2": {
                "Y": -256
              }
            }
          },
          {
            "RoomNumber": 43,
            "FaceIndex": 11,
            "VertexChanges": {
              "2": {
                "Y": -512
              },
              "3": {
                "Y": -256
              }
            }
          }
        ]
      },
      {
        "Comments": "Plug a gap.",
        "EMType": 26,
        "Quads": {
          "43": [
            {
              "Type": 4,
              "Vertices": [
                27,
                26,
                4,
                18
              ],
              "Texture": 96
            }
          ]
        }
      }
    ],
    [
      {
        "Comments": "Ensure the Damocles sword model is available.",
        "EMType": 145,
        "Tags": [
          4
        ],
        "Data": [
          {
            "ModelID": 43,
            "TextureMap": {
              "745": 109,
              "746": 109,
              "747": 109,
              "748": 109,
              "749": 127
            }
          }
        ]
      },
      {
        "Comments": "Add some swords.",
        "EMType": 51,
        "TypeID": 43,
        "Intensity": 4096,
        "Location": {
          "X": 40448,
          "Y": -9344,
          "Z": 47616,
          "Room": 1
        }
      },
      {
        "EMType": 51,
        "TypeID": 43,
        "Intensity": 4096,
        "Location": {
          "X": 40448,
          "Y": -9344,
          "Z": 49664,
          "Room": 1
        }
      },
      {
        "EMType": 61,
        "Locations": [
          {
            "X": 42496,
            "Y": -5888,
            "Z": 48640,
            "Room": 2
          }
        ],
        "Trigger": {
          "OneShot": true,
          "Mask": 31,
          "Actions": [
            {
              "Parameter": -2
            },
            {
              "Parameter": -1
            }
          ]
        }
      }
    ],
    [
      {
        "Comments": "Ensure the falling ceiling model is available.",
        "EMType": 145,
        "Tags": [
          4
        ],
        "Data": [
          {
            "ModelID": 53,
            "TexturedFace3": 14,
            "TexturedFace4": 2
          }
        ]
      },
      {
        "Comments": "Add falling ceiling.",
        "EMType": 51,
        "TypeID": 53,
        "Intensity": -1,
        "Location": {
          "X": 26112,
          "Y": -15360,
          "Z": 55808,
          "Room": 16,
          "Angle": -32768
        },
        "TargetRelocation": {
          "X": 26112,
          "Y": -13056,
          "Z": 53760,
          "Room": 16
        }
      },
      {
        "EMType": 61,
        "Locations": [
          {
            "X": 27136,
            "Y": -13312,
            "Z": 55808,
            "Room": 16
          }
        ],
        "Trigger": {
          "Mask": 31,
          "Actions": [
            {
              "Parameter": -1
            }
          ]
        }
      }
    ],
    [
      {
        "Comments": "Ensure the swinging blade model is available.",
        "EMType": 145,
        "Tags": [
          4
        ],
        "Data": [
          {
            "ModelID": 36,
            "TextureMap": {
              "666": 102,
              "667": 102,
              "668": 102,
              "669": 680,
              "670": 102,
              "671": 87,
              "672": 87,
              "673": 87,
              "674": 87,
              "675": 87,
              "676": 87,
              "677": 87
            }
          }
        ]
      },
      {
        "Comments": "Add a blade.",
        "EMType": 51,
        "TypeID": 36,
        "Intensity": -1,
        "Location": {
          "X": 28160,
          "Y": -2048,
          "Z": 34304,
          "Room": 40,
          "Angle": -32768
        }
      },
      {
        "EMType": 68,
        "Location": {
          "X": 28160,
          "Y": -1792,
          "Z": 41472,
          "Room": 39
        },
        "Actions": [
          {
            "Parameter": -1
          }
        ]
      }
    ],
    [
      {
        "Comments": "Ensure the swinging blade model is available.",
        "EMType": 145,
        "Tags": [
          4
        ],
        "Data": [
          {
            "ModelID": 36,
            "TextureMap": {
              "666": 102,
              "667": 102,
              "668": 102,
              "669": 680,
              "670": 102,
              "671": 87,
              "672": 87,
              "673": 87,
              "674": 87,
              "675": 87,
              "676": 87,
              "677": 87
            }
          }
        ]
      },
      {
        "Comments": "Add a blade.",
        "EMType": 51,
        "TypeID": 36,
        "Intensity": -1,
        "Location": {
          "X": 25088,
          "Y": 3072,
          "Z": 54784,
          "Room": 61
        }
      },
      {
        "EMType": 61,
        "Locations": [
          {
            "X": 25088,
            "Y": 3072,
            "Z": 53760,
            "Room": 61
          }
        ],
        "Trigger": {
          "Mask": 31,
          "Actions": [
            {
              "Parameter": -1
            }
          ]
        }
      }
    ],
    [
      {
        "Comments": "Ensure the boulder model is available.",
        "EMType": 145,
        "Tags": [
          4
        ],
        "Data": [
          {
            "ModelID": 38,
            "TexturedFace3": 11,
            "TexturedFace4": 1
          }
        ]
      },
      {
        "Comments": "Add a boulder.",
        "EMType": 51,
        "TypeID": 38,
        "Intensity": -1,
        "Location": {
          "X": 28160,
          "Y": -1024,
          "Z": 44544,
          "Room": 43
        }
      },
      {
        "EMType": 61,
        "Locations": [
          {
            "X": 28160,
            "Y": 2304,
            "Z": 48640,
            "Room": 43
          }
        ],
        "Trigger": {
          "Mask": 31,
          "Actions": [
            {
              "Parameter": -1
            }
          ]
        }
      }
    ],
    [
      {
        "Comments": "Ensure the boulder model is available.",
        "EMType": 145,
        "Tags": [
          4
        ],
        "Data": [
          {
            "ModelID": 38,
            "TexturedFace3": 11,
            "TexturedFace4": 1
          }
        ]
      },
      {
        "Comments": "Add a boulder.",
        "EMType": 51,
        "TypeID": 38,
        "Intensity": -1,
        "Location": {
          "X": 28160,
          "Y": 14848,
          "Z": 49664,
          "Room": 27,
          "Angle": -16384
        }
      },
      {
        "EMType": 61,
        "Locations": [
          {
            "X": 25088,
            "Y": 17664,
            "Z": 49664,
            "Room": 27
          }
        ],
        "Trigger": {
          "Mask": 31,
          "Actions": [
            {
              "Parameter": -1
            }
          ]
        }
      }
    ],
    [
      {
        "Comments": "Ensure the boulder model is available.",
        "EMType": 145,
        "Tags": [
          4,
          6
        ],
        "Data": [
          {
            "ModelID": 38,
            "TexturedFace3": 11,
            "TexturedFace4": 1
          }
        ]
      },
      {
        "Comments": "Add a boulder.",
        "EMType": 51,
        "TypeID": 38,
        "Intensity": -1,
        "Location": {
          "X": 19968,
          "Y": -1536,
          "Z": 52736,
          "Room": 57,
          "Angle": 16384
        }
      },
      {
        "EMType": 61,
        "Locations": [
          {
            "X": 22016,
            "Y": 4608,
            "Z": 52736,
            "Room": 57
          }
        ],
        "Trigger": {
          "Mask": 31,
          "Actions": [
            {
              "Parameter": -1
            }
          ]
        }
      },
      {
        "Comments": "Move any pickups in case the boulder blocks them.",
        "EMType": 43,
        "SectorLocations": [
          {
            "X": 27136,
            "Y": 4608,
            "Z": 52736,
            "Room": 57
          }
        ],
        "TargetLocation": {
          "X": 26112,
          "Y": 4608,
          "Z": 52736,
          "Room": 57
        }
      }
    ],
    [
      {
        "Comments": "Ensure the spikes model is available.",
        "EMType": 145,
        "Tags": [
          4
        ],
        "Data": [
          {
            "ModelID": 37,
            "TexturedFace3": 127
          }
        ]
      },
      {
        "Comments": "Add some spikes.",
        "EMType": 51,
        "TypeID": 37,
        "Intensity": 4096,
        "Location": {
          "X": 44544,
          "Y": -9472,
          "Z": 33280,
          "Room": 15
        }
      }
    ],
    [
      {
        "Comments": "Ensure the spikes model is available.",
        "EMType": 145,
        "Tags": [
          4
        ],
        "Data": [
          {
            "ModelID": 37,
            "TexturedFace3": 156
          }
        ]
      },
      {
        "Comments": "Add some spikes.",
        "EMType": 51,
        "TypeID": 37,
        "Intensity": 4096,
        "Location": {
          "X": 45568,
          "Y": -8704,
          "Z": 54784,
          "Room": 3
        }
      }
    ],
    [
      {
        "Comments": "Ensure the boulder model is available.",
        "EMType": 145,
        "Tags": [
          4
        ],
        "Data": [
          {
            "ModelID": 38,
            "TexturedFace3": 11,
            "TexturedFace4": 1
          }
        ]
      },
      {
        "Comments": "Convert the doors to Obelisk into boulders.",
        "EMType": 45,
        "EntityIndex": 69,
        "NewEntityType": 38
      },
      {
        "EMType": 45,
        "EntityIndex": 70,
        "NewEntityType": 38
      },
      {
        "Comments": "Reposition the first one and trigger it.",
        "EMType": 44,
        "EntityIndex": 69,
        "TargetLocation": {
          "X": 41472,
          "Y": -4352,
          "Z": 48640,
          "Room": 2,
          "Angle": -16384
        }
      },
      {
        "EMType": 61,
        "Locations": [
          {
            "X": 37376,
            "Y": -4096,
            "Z": 48640,
            "Room": 41
          }
        ],
        "Trigger": {
          "Mask": 31,
          "Actions": [
            {
              "Parameter": 69
            }
          ]
        }
      },
      {
        "Comments": "Reposition the second one and trigger it.",
        "EMType": 44,
        "EntityIndex": 70,
        "TargetLocation": {
          "X": 34304,
          "Y": -4096,
          "Z": 40448,
          "Room": 38,
          "Angle": -32768
        }
      },
      {
        "EMType": 61,
        "Locations": [
          {
            "X": 34304,
            "Y": -2560,
            "Z": 36352,
            "Room": 37
          }
        ],
        "Trigger": {
          "Mask": 31,
          "Actions": [
            {
              "Parameter": 70
            }
          ]
        }
      },
      {
        "Comments": "Fill the holes in the wall where the doors were.",
        "EMType": 26,
        "Quads": {
          "60": [
            {
              "Type": 4,
              "Vertices": [
                8,
                9,
                5,
                4
              ],
              "Texture": 677
            },
            {
              "Type": 4,
              "Vertices": [
                9,
                13,
                11,
                5
              ],
              "Texture": 681
            }
          ]
        }
      }
    ],
    [
      {
        "Comments": "Amend the slant near door 27 to get rid of the shortcut.",
        "EMType": 7,
        "Tags": [
          11
        ],
        "Location": {
          "X": 35328,
          "Y": -10240,
          "Z": 55808,
          "Room": 12
        },
        "SlantType": 2,
        "XSlant": -3
      },
      {
        "Comments": "Modify the faces to match the slant.",
        "EMType": 23,
        "Tags": [
          11
        ],
        "Modifications": [
          {
            "RoomNumber": 12,
            "FaceIndices": [
              49,
              53
            ],
            "VertexChanges": {
              "1": {
                "Y": 256
              }
            }
          },
          {
            "RoomNumber": 12,
            "FaceIndex": 47,
            "VertexChanges": {
              "1": {
                "Y": 256
              },
              "2": {
                "Y": 256
              }
            }
          },
          {
            "RoomNumber": 3,
            "FaceIndex": 41,
            "VertexChanges": {
              "0": {
                "Y": 256
              },
              "1": {
                "Y": 256
              }
            }
          }
        ]
      },
      {
        "Comments": "Any pickups on the old slope will be moved to the floor.",
        "EMType": 43,
        "Tags": [
          11
        ],
        "SectorLocations": [
          {
            "X": 35328,
            "Y": -10240,
            "Z": 55808,
            "Room": 12
          }
        ],
        "TargetLocation": {
          "X": 34304,
          "Y": -10496,
          "Z": 55808,
          "Room": 12
        }
      }
    ]
  ],
  "AllWithin": [
    [
      [
        {
          "Comments": "Default keyhole position.",
          "EMType": 1000
        }
      ],
      [
        {
          "Comments": "Potential keyhole location.",
          "EMType": 41,
          "Tags": [
            1
          ],
          "EntityIndex": 48,
          "Location": {
            "X": 34304,
            "Y": -4096,
            "Z": 40448,
            "Room": 38
          }
        }
      ],
      [
        {
          "Comments": "Potential keyhole location.",
          "EMType": 41,
          "Tags": [
            1
          ],
          "EntityIndex": 48,
          "Location": {
            "X": 34304,
            "Y": -4096,
            "Z": 40448,
            "Room": 38,
            "Angle": 16384
          }
        }
      ],
      [
        {
          "Comments": "Potential keyhole location.",
          "EMType": 41,
          "Tags": [
            1
          ],
          "EntityIndex": 48,
          "Location": {
            "X": 34304,
            "Y": -3584,
            "Z": 39424,
            "Room": 38,
            "Angle": 16384
          }
        }
      ],
      [
        {
          "Comments": "Potential keyhole location.",
          "EMType": 41,
          "Tags": [
            1
          ],
          "EntityIndex": 48,
          "Location": {
            "X": 34304,
            "Y": -3072,
            "Z": 38400,
            "Room": 38,
            "Angle": 16384
          }
        }
      ],
      [
        {
          "Comments": "Potential keyhole location.",
          "EMType": 41,
          "Tags": [
            1
          ],
          "EntityIndex": 48,
          "Location": {
            "X": 34304,
            "Y": -2560,
            "Z": 37376,
            "Room": 38,
            "Angle": 16384
          }
        }
      ],
      [
        {
          "Comments": "Potential keyhole location.",
          "EMType": 41,
          "Tags": [
            1
          ],
          "EntityIndex": 48,
          "Location": {
            "X": 33280,
            "Y": -1536,
            "Z": 37376,
            "Room": 38,
            "Angle": 16384
          }
        }
      ],
      [
        {
          "Comments": "Potential keyhole location.",
          "EMType": 41,
          "Tags": [
            1
          ],
          "EntityIndex": 48,
          "Location": {
            "X": 32256,
            "Y": -512,
            "Z": 37376,
            "Room": 38,
            "Angle": 16384
          }
        }
      ],
      [
        {
          "Comments": "Potential keyhole location.",
          "EMType": 41,
          "Tags": [
            1
          ],
          "EntityIndex": 48,
          "Location": {
            "X": 31232,
            "Y": 512,
            "Z": 37376,
            "Room": 38,
            "Angle": 16384
          }
        }
      ]
    ],
    [
      [
        {
          "Comments": "Potential slot location.",
          "EMType": 41,
          "Tags": [
            1
          ],
          "EntityIndex": 60,
          "Location": {
            "X": 18944,
            "Y": 512,
            "Z": 53760,
            "Room": 56
          }
        }
      ],
      [
        {
          "Comments": "Potential slot location.",
          "EMType": 41,
          "Tags": [
            1
          ],
          "EntityIndex": 60,
          "Location": {
            "X": 17920,
            "Y": 512,
            "Z": 53760,
            "Room": 56
          }
        }
      ],
      [
        {
          "Comments": "Potential slot location.",
          "EMType": 41,
          "Tags": [
            1
          ],
          "EntityIndex": 60,
          "Location": {
            "X": 16896,
            "Y": 512,
            "Z": 53760,
            "Room": 56
          }
        }
      ],
      [
        {
          "Comments": "Potential slot location.",
          "EMType": 41,
          "Tags": [
            1
          ],
          "EntityIndex": 60,
          "Location": {
            "X": 15872,
            "Y": 512,
            "Z": 53760,
            "Room": 56
          }
        }
      ],
      [
        {
          "Comments": "Potential slot location.",
          "EMType": 41,
          "Tags": [
            1
          ],
          "EntityIndex": 60,
          "Location": {
            "X": 14848,
            "Y": 512,
            "Z": 53760,
            "Room": 56
          }
        }
      ],
      [
        {
          "Comments": "Potential slot location.",
          "EMType": 41,
          "Tags": [
            1
          ],
          "EntityIndex": 60,
          "Location": {
            "X": 14848,
            "Y": 512,
            "Z": 53760,
            "Room": 56,
            "Angle": -16384
          }
        }
      ],
      [
        {
          "Comments": "Potential slot location.",
          "EMType": 41,
          "Tags": [
            1
          ],
          "EntityIndex": 60,
          "Location": {
            "X": 14848,
            "Y": 512,
            "Z": 52736,
            "Room": 56,
            "Angle": -16384
          }
        }
      ],
      [
        {
          "Comments": "Potential slot location.",
          "EMType": 41,
          "Tags": [
            1
          ],
          "EntityIndex": 60,
          "Location": {
            "X": 14848,
            "Y": 512,
            "Z": 51712,
            "Room": 56,
            "Angle": -16384
          }
        }
      ],
      [
        {
          "Comments": "Potential slot location.",
          "EMType": 41,
          "Tags": [
            1
          ],
          "EntityIndex": 60,
          "Location": {
            "X": 14848,
            "Y": 512,
            "Z": 46592,
            "Room": 56,
            "Angle": -16384
          }
        }
      ],
      [
        {
          "Comments": "Potential slot location.",
          "EMType": 41,
          "Tags": [
            1
          ],
          "EntityIndex": 60,
          "Location": {
            "X": 14848,
            "Y": 512,
            "Z": 45568,
            "Room": 56,
            "Angle": -16384
          }
        }
      ],
      [
        {
          "Comments": "Potential slot location.",
          "EMType": 41,
          "Tags": [
            1
          ],
          "EntityIndex": 60,
          "Location": {
            "X": 14848,
            "Y": 512,
            "Z": 44544,
            "Room": 56,
            "Angle": -16384
          }
        }
      ],
      [
        {
          "Comments": "Potential slot location.",
          "EMType": 41,
          "Tags": [
            1
          ],
          "EntityIndex": 60,
          "Location": {
            "X": 14848,
            "Y": 512,
            "Z": 43520,
            "Room": 56,
            "Angle": -16384
          }
        }
      ],
      [
        {
          "Comments": "Potential slot location.",
          "EMType": 41,
          "Tags": [
            1
          ],
          "EntityIndex": 60,
          "Location": {
            "X": 14848,
            "Y": 512,
            "Z": 43520,
            "Room": 56,
            "Angle": -32768
          }
        }
      ],
      [
        {
          "Comments": "Potential slot location.",
          "EMType": 41,
          "Tags": [
            1
          ],
          "EntityIndex": 60,
          "Location": {
            "X": 15872,
            "Y": 512,
            "Z": 43520,
            "Room": 56,
            "Angle": -32768
          }
        }
      ],
      [
        {
          "Comments": "Potential slot location.",
          "EMType": 41,
          "Tags": [
            1
          ],
          "EntityIndex": 60,
          "Location": {
            "X": 16896,
            "Y": 512,
            "Z": 43520,
            "Room": 56,
            "Angle": -32768
          }
        }
      ],
      [
        {
          "Comments": "Potential slot location.",
          "EMType": 41,
          "Tags": [
            1
          ],
          "EntityIndex": 60,
          "Location": {
            "X": 17920,
            "Y": 512,
            "Z": 43520,
            "Room": 56,
            "Angle": -32768
          }
        }
      ],
      [
        {
          "Comments": "Potential slot location.",
          "EMType": 41,
          "Tags": [
            1
          ],
          "EntityIndex": 60,
          "Location": {
            "X": 18944,
            "Y": 512,
            "Z": 43520,
            "Room": 56,
            "Angle": -32768
          }
        }
      ],
      [
        {
          "Comments": "Potential slot location.",
          "EMType": 41,
          "Tags": [
            1
          ],
          "EntityIndex": 60,
          "Location": {
            "X": 18944,
            "Y": 512,
            "Z": 43520,
            "Room": 56,
            "Angle": 16384
          }
        }
      ]
    ],
    [
      [
        {
          "Comments": "Default underwater lever position.",
          "EMType": 1000
        }
      ],
      [
        {
          "Comments": "Potential underwater lever location.",
          "EMType": 41,
          "Tags": [
            1
          ],
          "EntityIndex": 16,
          "Location": {
            "X": 32256,
            "Y": 23040,
            "Z": 52736,
            "Room": 4
          }
        }
      ],
      [
        {
          "Comments": "Potential underwater lever location.",
          "EMType": 41,
          "Tags": [
            1
          ],
          "EntityIndex": 16,
          "Location": {
            "X": 33280,
            "Y": 23040,
            "Z": 52736,
            "Room": 4
          }
        }
      ],
      [
        {
          "Comments": "Potential underwater lever location.",
          "EMType": 41,
          "Tags": [
            1
          ],
          "EntityIndex": 16,
          "Location": {
            "X": 33280,
            "Y": 23040,
            "Z": 52736,
            "Room": 4,
            "Angle": -32768
          }
        }
      ],
      [
        {
          "Comments": "Potential underwater lever location.",
          "EMType": 41,
          "Tags": [
            1
          ],
          "EntityIndex": 16,
          "Location": {
            "X": 32256,
            "Y": 23040,
            "Z": 52736,
            "Room": 4,
            "Angle": -32768
          }
        }
      ],
      [
        {
          "Comments": "Potential underwater lever location.",
          "EMType": 41,
          "Tags": [
            1
          ],
          "EntityIndex": 16,
          "Location": {
            "X": 31232,
            "Y": 23040,
            "Z": 52736,
            "Room": 4,
            "Angle": -32768
          }
        }
      ]
    ],
    [
      [
        {
          "Comments": "Don't make a puzzle room off the staircase of doom.",
          "EMType": 1000
        }
      ],
      [
        {
          "Comments": "Make a new room off the staircase of doom.",
          "EMType": 126,
          "Tags": [
            5
          ],
          "Location": {
            "X": 17408,
            "Y": 12800,
            "Z": 43008
          },
          "LinkedLocation": {
            "X": 24064,
            "Y": 12800,
            "Z": 44544,
            "Room": 29
          },
          "Textures": {
            "Floor": 102,
            "Ceiling": 98,
            "WallAlignment": 4,
            "Wall4": 96
          },
          "AmbientLighting": 7424,
          "DefaultVertex": {
            "Lighting": 6261
          },
          "Lights": [
            {
              "X": 3584,
              "Y": -1024,
              "Z": 4096,
              "Intensity1": 4096,
              "Fade1": 2560
            }
          ],
          "Height": 16,
          "Width": 7,
          "Depth": 8,
          "FloorHeights": {
            "-7": [
              9,
              46
            ],
            "-3": [
              27,
              28
            ],
            "-2": [
              18,
              21,
              34,
              37
            ],
            "-1": [
              17,
              22,
              33,
              38
            ],
            "-127": [
              10,
              11,
              12,
              13,
              42,
              43,
              44,
              45
            ]
          }
        },
        {
          "Comments": "Visibility portals for the new room.",
          "EMType": 81,
          "Portals": [
            {
              "BaseRoom": 29,
              "AdjoiningRoom": -1,
              "Normal": {
                "X": 1
              },
              "Vertices": [
                {
                  "X": 1024,
                  "Y": 11264,
                  "Z": 1024
                },
                {
                  "X": 1024,
                  "Y": 11264,
                  "Z": 2048
                },
                {
                  "X": 1024,
                  "Y": 12800,
                  "Z": 2048
                },
                {
                  "X": 1024,
                  "Y": 12800,
                  "Z": 1024
                }
              ]
            },
            {
              "BaseRoom": -1,
              "AdjoiningRoom": 29,
              "Normal": {
                "X": -1
              },
              "Vertices": [
                {
                  "X": 6144,
                  "Y": 11264,
                  "Z": 2048
                },
                {
                  "X": 6144,
                  "Y": 11264,
                  "Z": 1024
                },
                {
                  "X": 6144,
                  "Y": 12800,
                  "Z": 1024
                },
                {
                  "X": 6144,
                  "Y": 12800,
                  "Z": 2048
                }
              ]
            },
            {
              "BaseRoom": 31,
              "AdjoiningRoom": -1,
              "Normal": {
                "X": 1
              },
              "Vertices": [
                {
                  "X": 1024,
                  "Y": 9472,
                  "Z": 1024
                },
                {
                  "X": 1024,
                  "Y": 9472,
                  "Z": 2048
                },
                {
                  "X": 1024,
                  "Y": 11008,
                  "Z": 2048
                },
                {
                  "X": 1024,
                  "Y": 11008,
                  "Z": 1024
                }
              ]
            },
            {
              "BaseRoom": -1,
              "AdjoiningRoom": 31,
              "Normal": {
                "X": -1
              },
              "Vertices": [
                {
                  "X": 6144,
                  "Y": 9216,
                  "Z": 7168
                },
                {
                  "X": 6144,
                  "Y": 9216,
                  "Z": 6144
                },
                {
                  "X": 6144,
                  "Y": 11008,
                  "Z": 6144
                },
                {
                  "X": 6144,
                  "Y": 11008,
                  "Z": 7168
                }
              ]
            }
          ]
        },
        {
          "Comments": "Collisional portals.",
          "EMType": 82,
          "Portals": {
            "29": {
              "-1": [
                {
                  "X": 23040,
                  "Y": 12800,
                  "Z": 44544,
                  "Room": 29
                }
              ]
            },
            "31": {
              "-1": [
                {
                  "X": 23040,
                  "Y": 11008,
                  "Z": 49664,
                  "Room": 31
                }
              ]
            },
            "-1": {
              "29": [
                {
                  "X": 24064,
                  "Y": 12800,
                  "Z": 44544,
                  "Room": -1
                }
              ],
              "31": [
                {
                  "X": 24064,
                  "Y": 12800,
                  "Z": 49664,
                  "Room": -1
                }
              ]
            }
          }
        },
        {
          "Comments": "Move some faces around.",
          "EMType": 23,
          "Modifications": [
            {
              "RoomNumber": 29,
              "FaceIndex": 2,
              "VertexChanges": {
                "0": {
                  "Z": 1024
                },
                "1": {
                  "X": 1024
                },
                "2": {
                  "X": 1024
                },
                "3": {
                  "Z": 1024
                }
              }
            },
            {
              "RoomNumber": -1,
              "FaceIndex": 152,
              "VertexChanges": {
                "2": {
                  "Y": -512
                },
                "3": {
                  "Y": -512
                }
              }
            },
            {
              "RoomNumber": -1,
              "FaceIndex": 166,
              "VertexChanges": {
                "2": {
                  "Y": 512
                },
                "3": {
                  "Y": 512
                }
              }
            }
          ]
        },
        {
          "Comments": "Change some face textures.",
          "EMType": 21,
          "TextureMap": {
            "675": {
              "29": {
                "Rectangles": [
                  2
                ]
              }
            }
          }
        },
        {
          "Comments": "Remove the old collisional portal.",
          "EMType": 86,
          "Location1": {
            "X": 24064,
            "Y": 12800,
            "Z": 45568,
            "Room": 29
          },
          "Location2": {
            "X": 24064,
            "Y": 12800,
            "Z": 44544,
            "Room": 30
          }
        },
        {
          "Comments": "Remove some redundant faces.",
          "EMType": 22,
          "GeometryMap": {
            "-1": {
              "Rectangles": [
                151,
                164,
                165
              ]
            },
            "31": {
              "Rectangles": [
                2
              ]
            }
          }
        },
        {
          "Comments": "Make a new face - fake door.",
          "EMType": 26,
          "Quads": {
            "30": [
              {
                "Type": 4,
                "Vertices": [
                  5,
                  4,
                  2,
                  3
                ],
                "Texture": 675
              }
            ]
          }
        },
        {
          "Comments": "Change some face textures.",
          "EMType": 21,
          "TextureMap": {
            "45": {
              "-1": {
                "Rectangles": [
                  5
                ]
              }
            },
            "90": {
              "-1": {
                "Rectangles": [
                  45,
                  127
                ]
              }
            },
            "91": {
              "-1": {
                "Rectangles": [
                  53,
                  118
                ]
              }
            },
            "99": {
              "-1": {
                "Rectangles": [
                  47,
                  56,
                  81,
                  91,
                  115,
                  123
                ]
              }
            },
            "94": {
              "-1": {
                "Rectangles": [
                  83,
                  85
                ]
              }
            }
          }
        },
        {
          "Comments": "Move some faces around.",
          "EMType": 23,
          "Rotations": [
            {
              "RoomNumber": -1,
              "FaceIndices": [
                83,
                85
              ],
              "VertexRemap": {
                "0": 1,
                "1": 2,
                "2": 3,
                "3": 0
              }
            }
          ]
        },
        {
          "Comments": "Add a coffin.",
          "EMType": 24,
          "MeshID": 226,
          "Intensity": 5632,
          "Locations": [
            {
              "X": 18944,
              "Y": 12800,
              "Z": 49664,
              "Room": -1,
              "Angle": -16384
            }
          ]
        },
        {
          "Comments": "Add a door to the new room.",
          "EMType": 51,
          "TypeID": 60,
          "Intensity": -1,
          "Location": {
            "X": 23040,
            "Y": 11008,
            "Z": 49664,
            "Room": -1,
            "Angle": -16384
          }
        },
        {
          "Comments": "Lever to activate the door.",
          "EMType": 51,
          "TypeID": 55,
          "Intensity": -1,
          "Location": {
            "X": 18944,
            "Y": 11008,
            "Z": 44544,
            "Room": -1
          }
        },
        {
          "Comments": "Timed run to the door.",
          "EMType": 61,
          "HardVariant": {
            "Comments": "Very tight timer in hard mode.",
            "EMType": 61,
            "EntityLocation": -1,
            "Trigger": {
              "TrigType": 2,
              "Mask": 31,
              "Timer": 6,
              "SwitchOrKeyRef": -1,
              "Actions": [
                {
                  "Parameter": -2
                }
              ]
            }
          },
          "EntityLocation": -1,
          "Trigger": {
            "TrigType": 2,
            "Mask": 31,
            "Timer": 10,
            "SwitchOrKeyRef": -1,
            "Actions": [
              {
                "Parameter": -2
              }
            ]
          }
        },
        {
          "Comments": "Keep the door open once on the other side.",
          "EMType": 61,
          "Locations": [
            {
              "X": 28160,
              "Y": 9472,
              "Z": 49664,
              "Room": 31
            }
          ],
          "Trigger": {
            "Mask": 31,
            "Actions": [
              {
                "Parameter": -2
              }
            ]
          }
        }
      ],
      [
        {
          "Comments": "Make a new room off the staircase of doom.",
          "EMType": 126,
          "Tags": [
            5
          ],
          "Location": {
            "X": 17408,
            "Y": 12800,
            "Z": 43008
          },
          "LinkedLocation": {
            "X": 24064,
            "Y": 12800,
            "Z": 44544,
            "Room": 29
          },
          "Textures": {
            "Floor": 102,
            "Ceiling": 21,
            "WallAlignment": 5,
            "Wall4": 2,
            "Wall2": 35,
            "Wall1": 138
          },
          "AmbientLighting": 7424,
          "DefaultVertex": {
            "Lighting": 6261
          },
          "Lights": [
            {
              "X": 3584,
              "Y": -1024,
              "Z": 4096,
              "Intensity1": 4096,
              "Fade1": 2560
            }
          ],
          "Height": 16,
          "Width": 7,
          "Depth": 8,
          "FloorHeights": {
            "-7": [
              46
            ],
            "-1": [
              18,
              21,
              34,
              37
            ],
            "-3": [
              19,
              20,
              35,
              36
            ],
            "-127": [
              10,
              11,
              12,
              13,
              42,
              43,
              44,
              45
            ]
          }
        },
        {
          "Comments": "Visibility portals for the new room.",
          "EMType": 81,
          "Portals": [
            {
              "BaseRoom": 29,
              "AdjoiningRoom": -1,
              "Normal": {
                "X": 1
              },
              "Vertices": [
                {
                  "X": 1024,
                  "Y": 11264,
                  "Z": 1024
                },
                {
                  "X": 1024,
                  "Y": 11264,
                  "Z": 2048
                },
                {
                  "X": 1024,
                  "Y": 12800,
                  "Z": 2048
                },
                {
                  "X": 1024,
                  "Y": 12800,
                  "Z": 1024
                }
              ]
            },
            {
              "BaseRoom": -1,
              "AdjoiningRoom": 29,
              "Normal": {
                "X": -1
              },
              "Vertices": [
                {
                  "X": 6144,
                  "Y": 11264,
                  "Z": 2048
                },
                {
                  "X": 6144,
                  "Y": 11264,
                  "Z": 1024
                },
                {
                  "X": 6144,
                  "Y": 12800,
                  "Z": 1024
                },
                {
                  "X": 6144,
                  "Y": 12800,
                  "Z": 2048
                }
              ]
            },
            {
              "BaseRoom": 31,
              "AdjoiningRoom": -1,
              "Normal": {
                "X": 1
              },
              "Vertices": [
                {
                  "X": 1024,
                  "Y": 9472,
                  "Z": 1024
                },
                {
                  "X": 1024,
                  "Y": 9472,
                  "Z": 2048
                },
                {
                  "X": 1024,
                  "Y": 11008,
                  "Z": 2048
                },
                {
                  "X": 1024,
                  "Y": 11008,
                  "Z": 1024
                }
              ]
            },
            {
              "BaseRoom": -1,
              "AdjoiningRoom": 31,
              "Normal": {
                "X": -1
              },
              "Vertices": [
                {
                  "X": 6144,
                  "Y": 9216,
                  "Z": 7168
                },
                {
                  "X": 6144,
                  "Y": 9216,
                  "Z": 6144
                },
                {
                  "X": 6144,
                  "Y": 11008,
                  "Z": 6144
                },
                {
                  "X": 6144,
                  "Y": 11008,
                  "Z": 7168
                }
              ]
            }
          ]
        },
        {
          "Comments": "Collisional portals.",
          "EMType": 82,
          "Portals": {
            "29": {
              "-1": [
                {
                  "X": 23040,
                  "Y": 12800,
                  "Z": 44544,
                  "Room": 29
                }
              ]
            },
            "31": {
              "-1": [
                {
                  "X": 23040,
                  "Y": 11008,
                  "Z": 49664,
                  "Room": 31
                }
              ]
            },
            "-1": {
              "29": [
                {
                  "X": 24064,
                  "Y": 12800,
                  "Z": 44544,
                  "Room": -1
                }
              ],
              "31": [
                {
                  "X": 24064,
                  "Y": 12800,
                  "Z": 49664,
                  "Room": -1
                }
              ]
            }
          }
        },
        {
          "Comments": "Move some faces around.",
          "EMType": 23,
          "Modifications": [
            {
              "RoomNumber": 29,
              "FaceIndex": 2,
              "VertexChanges": {
                "0": {
                  "Z": 1024
                },
                "1": {
                  "X": 1024
                },
                "2": {
                  "X": 1024
                },
                "3": {
                  "Z": 1024
                }
              }
            },
            {
              "RoomNumber": -1,
              "FaceIndex": 145,
              "VertexChanges": {
                "2": {
                  "Y": -512
                },
                "3": {
                  "Y": -512
                }
              }
            },
            {
              "RoomNumber": -1,
              "FaceIndex": 158,
              "VertexChanges": {
                "0": {
                  "Y": -1024
                },
                "1": {
                  "Y": -1024
                },
                "2": {
                  "Y": -1280
                },
                "3": {
                  "Y": -1280
                }
              }
            }
          ]
        },
        {
          "Comments": "Change some face textures.",
          "EMType": 21,
          "TextureMap": {
            "675": {
              "29": {
                "Rectangles": [
                  2
                ]
              }
            },
            "35": {
              "-1": {
                "Rectangles": [
                  145
                ]
              }
            },
            "872": {
              "-1": {
                "Rectangles": [
                  14
                ]
              }
            },
            "105": {
              "-1": {
                "Rectangles": [
                  65,
                  101
                ]
              }
            },
            "104": {
              "-1": {
                "Rectangles": [
                  94,
                  72
                ]
              }
            },
            "100": {
              "-1": {
                "Rectangles": [
                  33,
                  133
                ]
              }
            }
          }
        },
        {
          "Comments": "Remove the old collisional portal.",
          "EMType": 86,
          "Location1": {
            "X": 24064,
            "Y": 12800,
            "Z": 45568,
            "Room": 29
          },
          "Location2": {
            "X": 24064,
            "Y": 12800,
            "Z": 44544,
            "Room": 30
          }
        },
        {
          "Comments": "Make a new face - fake door.",
          "EMType": 26,
          "Quads": {
            "30": [
              {
                "Type": 4,
                "Vertices": [
                  5,
                  4,
                  2,
                  3
                ],
                "Texture": 675
              }
            ]
          }
        },
        {
          "Comments": "Remove some redundant faces.",
          "EMType": 22,
          "GeometryMap": {
            "31": {
              "Rectangles": [
                2
              ]
            },
            "-1": {
              "Rectangles": [
                144,
                157,
                159
              ]
            }
          }
        },
        {
          "Comments": "Add some coffins.",
          "EMType": 24,
          "MeshID": 226,
          "Intensity": 5632,
          "Locations": [
            {
              "X": 19968,
              "Y": 12544,
              "Z": 48640,
              "Room": -1,
              "Angle": -16384
            },
            {
              "X": 19968,
              "Y": 12544,
              "Z": 45568,
              "Room": -1,
              "Angle": -16384
            },
            {
              "X": 22016,
              "Y": 12544,
              "Z": 48640,
              "Room": -1,
              "Angle": 16384
            },
            {
              "X": 22016,
              "Y": 12544,
              "Z": 45568,
              "Room": -1,
              "Angle": 16384
            }
          ]
        },
        {
          "Comments": "Add some pedestals.",
          "EMType": 24,
          "MeshID": 204,
          "Intensity": 5632,
          "Locations": [
            {
              "X": 22016,
              "Y": 12032,
              "Z": 47104,
              "Room": -1,
              "Angle": 16384
            },
            {
              "X": 19968,
              "Y": 12032,
              "Z": 47104,
              "Room": -1,
              "Angle": -16384
            }
          ]
        },
        {
          "Comments": "Add some troll items.",
          "EMType": 31,
          "ID": 94,
          "Vertex": {
            "Lighting": 4096
          },
          "Locations": [
            {
              "X": 22016,
              "Y": 11510,
              "Z": 47104,
              "Room": -1
            },
            {
              "X": 19968,
              "Y": 11510,
              "Z": 47104,
              "Room": -1
            }
          ]
        },
        {
          "Comments": "Add a door to the new room.",
          "EMType": 51,
          "TypeID": 60,
          "Intensity": -1,
          "Location": {
            "X": 23040,
            "Y": 11008,
            "Z": 49664,
            "Room": -1,
            "Angle": -16384
          }
        },
        {
          "Comments": "Pushblock to activate the door.",
          "EMType": 51,
          "TypeID": 48,
          "Intensity": -1,
          "Location": {
            "X": 18944,
            "Y": 12800,
            "Z": 44544,
            "Room": -1
          }
        },
        {
          "Comments": "Actual medi.",
          "EMType": 51,
          "TypeID": 93,
          "Intensity": 4096,
          "Location": {
            "X": 18944,
            "Y": 12800,
            "Z": 44544,
            "Room": -1
          }
        },
        {
          "Comments": "Heavy trigger for the pushblock.",
          "EMType": 61,
          "Locations": [
            {
              "X": 18944,
              "Y": 12800,
              "Z": 49664,
              "Room": -1
            }
          ],
          "Trigger": {
            "TrigType": 5,
            "Mask": 31,
            "Actions": [
              {
                "Parameter": -3
              }
            ]
          }
        }
      ],
      [
        {
          "Comments": "Make a new room off the staircase of doom.",
          "EMType": 126,
          "Tags": [
            5
          ],
          "Location": {
            "X": 22528,
            "Y": 12800,
            "Z": 36864
          },
          "LinkedLocation": {
            "X": 24064,
            "Y": 12800,
            "Z": 44544,
            "Room": 29
          },
          "Textures": {
            "Floor": 102,
            "Ceiling": 98,
            "WallAlignment": 4,
            "Wall4": 96
          },
          "AmbientLighting": 7424,
          "DefaultVertex": {
            "Lighting": 6261
          },
          "Lights": [
            {
              "X": 1536,
              "Y": -512,
              "Z": 1536,
              "Intensity1": 2048,
              "Fade1": 2560
            }
          ],
          "Height": 4,
          "Width": 4,
          "Depth": 8,
          "FloorHeights": {
            "-127": [
              18,
              19,
              20,
              21,
              22
            ]
          }
        },
        {
          "Comments": "Visibility portals for the new room.",
          "EMType": 81,
          "Portals": [
            {
              "BaseRoom": 29,
              "AdjoiningRoom": -1,
              "Normal": {
                "Z": 1
              },
              "Vertices": [
                {
                  "X": 2048,
                  "Y": 11776,
                  "Z": 1024
                },
                {
                  "X": 1024,
                  "Y": 11776,
                  "Z": 1024
                },
                {
                  "X": 1024,
                  "Y": 12800,
                  "Z": 1024
                },
                {
                  "X": 2048,
                  "Y": 12800,
                  "Z": 1024
                }
              ]
            },
            {
              "BaseRoom": -1,
              "AdjoiningRoom": 29,
              "Normal": {
                "Z": -1
              },
              "Vertices": [
                {
                  "X": 1024,
                  "Y": 11776,
                  "Z": 7168
                },
                {
                  "X": 2048,
                  "Y": 11776,
                  "Z": 7168
                },
                {
                  "X": 2048,
                  "Y": 12800,
                  "Z": 7168
                },
                {
                  "X": 1024,
                  "Y": 12800,
                  "Z": 7168
                }
              ]
            }
          ]
        },
        {
          "Comments": "Collisional portals.",
          "EMType": 82,
          "Portals": {
            "29": {
              "-1": [
                {
                  "X": 24064,
                  "Y": 12800,
                  "Z": 43520,
                  "Room": 29
                }
              ]
            },
            "-1": {
              "29": [
                {
                  "X": 24064,
                  "Y": 12800,
                  "Z": 44544,
                  "Room": -1
                }
              ]
            }
          }
        },
        {
          "Comments": "Clang-clang a-go-go.",
          "EMType": 51,
          "TypeID": 42,
          "Intensity": -1,
          "Location": {
            "X": 24064,
            "Y": 12800,
            "Z": 41472,
            "Room": -1
          }
        },
        {
          "EMType": 51,
          "TypeID": 42,
          "Intensity": -1,
          "Location": {
            "X": 24064,
            "Y": 12800,
            "Z": 40448,
            "Room": -1
          }
        },
        {
          "EMType": 51,
          "TypeID": 42,
          "Intensity": -1,
          "Location": {
            "X": 24064,
            "Y": 12800,
            "Z": 39424,
            "Room": -1
          }
        },
        {
          "Comments": "Clang-clang pads.",
          "EMType": 61,
          "Locations": [
            {
              "X": 24064,
              "Y": 12800,
              "Z": 42496,
              "Room": -1
            },
            {
              "X": 24064,
              "Y": 12800,
              "Z": 41472,
              "Room": -1
            },
            {
              "X": 24064,
              "Y": 12800,
              "Z": 40448,
              "Room": -1
            },
            {
              "X": 24064,
              "Y": 12800,
              "Z": 39424,
              "Room": -1
            }
          ],
          "Trigger": {
            "TrigType": 1,
            "Mask": 31,
            "Actions": [
              {
                "Parameter": -3
              },
              {
                "Parameter": -2
              },
              {
                "Parameter": -1
              }
            ]
          }
        },
        {
          "Comments": "Switch them off.",
          "EMType": 61,
          "Locations": [
            {
              "X": 24064,
              "Y": 12800,
              "Z": 43520,
              "Room": -1
            },
            {
              "X": 24064,
              "Y": 12800,
              "Z": 38400,
              "Room": -1
            }
          ],
          "Trigger": {
            "TrigType": 6,
            "Mask": 31,
            "Actions": [
              {
                "Parameter": -3
              },
              {
                "Parameter": -2
              },
              {
                "Parameter": -1
              }
            ]
          }
        },
        {
          "Comments": "Add a door to block the main corridor.",
          "EMType": 51,
          "TypeID": 60,
          "Intensity": -1,
          "Location": {
            "X": 24064,
            "Y": 12800,
            "Z": 44544,
            "Room": 29,
            "Angle": -32768
          }
        },
        {
          "Comments": "Lever to activate the door.",
          "EMType": 51,
          "TypeID": 55,
          "Intensity": -1,
          "Location": {
            "X": 25088,
            "Y": 12800,
            "Z": 38400,
            "Room": -1,
            "Angle": 16384
          }
        },
        {
          "Comments": "Trigger the door.",
          "EMType": 61,
          "HardVariant": {
            "Comments": "Tight timer to get to the door in hard mode.",
            "EMType": 61,
            "EntityLocation": -1,
            "Trigger": {
              "TrigType": 2,
              "Mask": 31,
              "Timer": 8,
              "SwitchOrKeyRef": -1,
              "Actions": [
                {
                  "Parameter": -2
                }
              ]
            }
          },
          "EntityLocation": -1,
          "Trigger": {
            "TrigType": 2,
            "Mask": 31,
            "SwitchOrKeyRef": -1,
            "Actions": [
              {
                "Parameter": -2
              }
            ]
          }
        },
        {
          "Comments": "Placeholder for default mode.",
          "EMType": 1000,
          "HardVariant": {
            "Comments": "Keep the door open once on the other side.",
            "EMType": 61,
            "Locations": [
              {
                "X": 24064,
                "Y": 11008,
                "Z": 49664,
                "Room": 31
              }
            ],
            "Trigger": {
              "Mask": 31,
              "Actions": [
                {
                  "Parameter": -2
                }
              ]
            }
          }
        },
        {
          "Comments": "Add a lever texture.",
          "EMType": 21,
          "TextureMap": {
            "45": {
              "-1": {
                "Rectangles": [
                  28
                ]
              }
            }
          }
        },
        {
          "Comments": "Make way for the portal.",
          "EMType": 22,
          "GeometryMap": {
            "-1": {
              "Rectangles": [
                23
              ]
            }
          }
        },
        {
          "EMType": 23,
          "Modifications": [
            {
              "RoomNumber": 29,
              "FaceIndex": 3,
              "VertexChanges": {
                "2": {
                  "Y": -1024
                },
                "3": {
                  "Y": -1024
                }
              }
            }
          ]
        }
      ]
    ]
  ],
  "OneOf": [
    {
      "Leader": [
        {
          "Comments": "Remove the default lever texture in room 9.",
          "EMType": 23,
          "Tags": [
            1
          ],
          "Modifications": [
            {
              "RoomNumber": 9,
              "FaceIndex": 21,
              "VertexChanges": {
                "2": {
                  "Y": 1024
                },
                "3": {
                  "Y": 1024
                }
              }
            }
          ]
        }
      ],
      "Followers": [
        [
          {
            "Comments": "Potential lever location.",
            "EMType": 41,
            "EntityIndex": 21,
            "Location": {
              "X": 55808,
              "Y": -8448,
              "Z": 56832,
              "Room": 9
            }
          },
          {
            "Comments": "Texture changes for above.",
            "EMType": 23,
            "Modifications": [
              {
                "RoomNumber": 9,
                "FaceIndex": 20,
                "VertexChanges": {
                  "0": {
                    "X": 1024,
                    "Y": 256
                  },
                  "1": {
                    "X": 1024,
                    "Y": 256
                  },
                  "2": {
                    "X": 1024,
                    "Y": 256
                  },
                  "3": {
                    "X": 1024,
                    "Y": 256
                  }
                }
              },
              {
                "RoomNumber": 9,
                "FaceIndex": 45,
                "VertexChanges": {
                  "1": {
                    "Y": -1024
                  },
                  "2": {
                    "Y": -1024
                  }
                }
              }
            ]
          }
        ],
        [
          {
            "Comments": "Potential lever location.",
            "EMType": 41,
            "EntityIndex": 21,
            "Location": {
              "X": 57856,
              "Y": -8448,
              "Z": 56832,
              "Room": 9
            }
          },
          {
            "Comments": "Texture changes for above.",
            "EMType": 23,
            "Modifications": [
              {
                "RoomNumber": 9,
                "FaceIndex": 20,
                "VertexChanges": {
                  "0": {
                    "X": 3072,
                    "Y": 256
                  },
                  "1": {
                    "X": 3072,
                    "Y": 256
                  },
                  "2": {
                    "X": 3072,
                    "Y": 256
                  },
                  "3": {
                    "X": 3072,
                    "Y": 256
                  }
                }
              },
              {
                "RoomNumber": 9,
                "FaceIndex": 144,
                "VertexChanges": {
                  "1": {
                    "Y": -1024
                  },
                  "2": {
                    "Y": -1024
                  }
                }
              }
            ]
          }
        ],
        [
          {
            "Comments": "Potential lever location.",
            "EMType": 41,
            "EntityIndex": 21,
            "Location": {
              "X": 57856,
              "Y": -8448,
              "Z": 56832,
              "Room": 9,
              "Angle": 16384
            }
          },
          {
            "Comments": "Texture changes for above.",
            "EMType": 23,
            "Modifications": [
              {
                "RoomNumber": 9,
                "FaceIndex": 20,
                "VertexChanges": {
                  "0": {
                    "X": 4096,
                    "Y": 256
                  },
                  "1": {
                    "X": 3072,
                    "Y": 256,
                    "Z": -1024
                  },
                  "2": {
                    "X": 3072,
                    "Y": 256,
                    "Z": -1024
                  },
                  "3": {
                    "X": 4096,
                    "Y": 256
                  }
                }
              },
              {
                "RoomNumber": 9,
                "FaceIndex": 161,
                "VertexChanges": {
                  "2": {
                    "Y": -1024
                  },
                  "3": {
                    "Y": -1024
                  }
                }
              }
            ]
          }
        ],
        [
          {
            "Comments": "Potential lever location.",
            "EMType": 41,
            "EntityIndex": 21,
            "Location": {
              "X": 57856,
              "Y": -9472,
              "Z": 54784,
              "Room": 9,
              "Angle": 16384
            }
          },
          {
            "Comments": "Texture changes for above.",
            "EMType": 23,
            "Modifications": [
              {
                "RoomNumber": 9,
                "FaceIndex": 20,
                "VertexChanges": {
                  "0": {
                    "X": 4096,
                    "Y": -768,
                    "Z": -2048
                  },
                  "1": {
                    "X": 3072,
                    "Y": -768,
                    "Z": -3072
                  },
                  "2": {
                    "X": 3072,
                    "Y": -768,
                    "Z": -3072
                  },
                  "3": {
                    "X": 4096,
                    "Y": -768,
                    "Z": -2048
                  }
                }
              },
              {
                "RoomNumber": 9,
                "FaceIndex": 159,
                "VertexChanges": {
                  "2": {
                    "Y": -1024
                  },
                  "3": {
                    "Y": -1024
                  }
                }
              }
            ]
          }
        ],
        [
          {
            "Comments": "Potential lever location.",
            "EMType": 41,
            "EntityIndex": 21,
            "Location": {
              "X": 57856,
              "Y": -9216,
              "Z": 52736,
              "Room": 9,
              "Angle": 16384
            }
          },
          {
            "Comments": "Texture changes for above.",
            "EMType": 23,
            "Modifications": [
              {
                "RoomNumber": 9,
                "FaceIndex": 20,
                "VertexChanges": {
                  "0": {
                    "X": 4096,
                    "Y": -512,
                    "Z": -4096
                  },
                  "1": {
                    "X": 3072,
                    "Y": -512,
                    "Z": -5120
                  },
                  "2": {
                    "X": 3072,
                    "Y": -512,
                    "Z": -5120
                  },
                  "3": {
                    "X": 4096,
                    "Y": -512,
                    "Z": -4096
                  }
                }
              },
              {
                "RoomNumber": 9,
                "FaceIndex": 157,
                "VertexChanges": {
                  "0": {
                    "Y": -1024
                  },
                  "1": {
                    "Y": -1024
                  }
                }
              }
            ]
          }
        ],
        [
          {
            "Comments": "Potential lever location.",
            "EMType": 41,
            "EntityIndex": 21,
            "Location": {
              "X": 57856,
              "Y": -9216,
              "Z": 48640,
              "Room": 9,
              "Angle": 16384
            }
          },
          {
            "Comments": "Texture changes for above.",
            "EMType": 23,
            "Modifications": [
              {
                "RoomNumber": 9,
                "FaceIndex": 20,
                "VertexChanges": {
                  "0": {
                    "X": 4096,
                    "Y": -512,
                    "Z": -8192
                  },
                  "1": {
                    "X": 3072,
                    "Y": -512,
                    "Z": -9216
                  },
                  "2": {
                    "X": 3072,
                    "Y": -512,
                    "Z": -9216
                  },
                  "3": {
                    "X": 4096,
                    "Y": -512,
                    "Z": -8192
                  }
                }
              },
              {
                "RoomNumber": 9,
                "FaceIndex": 153,
                "VertexChanges": {
                  "2": {
                    "Y": -1024
                  },
                  "3": {
                    "Y": -1024
                  }
                }
              }
            ]
          }
        ]
      ]
    }
  ],
  "ConditionalAllWithin": [],
  "ConditionalAll": [
    {
      "Condition": {
        "Comments": "Check if key item #54 is in its default position. If not, move the trigger to its new location.",
        "ConditionType": 0,
        "EntityIndex": 54,
        "X": 19968,
        "Y": 512,
        "Z": 44544,
        "Room": 44
      },
      "OnFalse": [
        {
          "EMType": 67,
          "BaseLocation": {
            "X": 19968,
            "Y": 512,
            "Z": 44544,
            "Room": 44
          },
          "EntityLocation": 54
        }
      ]
    },
    {
      "Condition": {
        "Comments": "If Adam or Barney is present, we have to change the scion pickup as the MiscAnim that normally ends the level will have been overwritten.",
        "ConditionType": 41,
        "Or": [
          {
            "ConditionType": 41,
            "ModelID": 18
          }
        ],
        "ModelID": 34
      },
      "OnTrue": [
        {
          "Comments": "Convert the scion type to the one Pierre drops.",
          "EMType": 143,
          "OldSpriteID": 143,
          "NewSpriteID": 144
        },
        {
          "Comments": "Get rid of the pedestal.",
          "EMType": 25,
          "ClearFromRooms": {
            "204": [
              62
            ]
          }
        },
        {
          "Comments": "Move the scion to the ground and further up the corridor.",
          "EMType": 44,
          "EntityIndex": 73,
          "TargetLocation": {
            "X": 39424,
            "Y": 3072,
            "Z": 59904,
            "Room": 63
          }
        },
        {
          "Comments": "Add a level-end pickup trigger.",
          "EMType": 61,
          "Locations": [
            {
              "X": 39424,
              "Y": 3072,
              "Z": 59904,
              "Room": 63
            }
          ],
          "Trigger": {
            "TrigType": 4,
            "Mask": 31,
            "Actions": [
              {
                "Parameter": 73
              },
              {
                "Action": 7
              }
            ]
          }
        }
      ]
    }
  ],
  "ConditionalOneOf": [],
  "Mirrored": []
}